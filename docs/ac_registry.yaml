# DO NOT edit this file manually - run scripts/generate_ac_registry.py
# Regenerate: python scripts/generate_ac_registry.py
version: '1.0'
total: 447
acs:
  # EPIC-001: phase0-setup
  - id: AC1.1.1
    epic: 1
    epic_name: phase0-setup
    description: 'Root moon.yml exists'
    mandatory: true
  - id: AC1.1.2
    epic: 1
    epic_name: phase0-setup
    description: 'apps/backend/moon.yml exists'
    mandatory: true
  - id: AC1.1.3
    epic: 1
    epic_name: phase0-setup
    description: 'apps/frontend/moon.yml exists'
    mandatory: true
  - id: AC1.1.4
    epic: 1
    epic_name: phase0-setup
    description: 'infra/moon.yml exists'
    mandatory: true
  - id: AC1.2.1
    epic: 1
    epic_name: phase0-setup
    description: 'FastAPI project structure exists'
    mandatory: true
  - id: AC1.2.2
    epic: 1
    epic_name: phase0-setup
    description: 'Auth integration works (register/login/JWT)'
    mandatory: true
  - id: AC1.2.3
    epic: 1
    epic_name: phase0-setup
    description: 'SQLAlchemy + Alembic config valid'
    mandatory: true
  - id: AC1.2.4
    epic: 1
    epic_name: phase0-setup
    description: 'Health endpoint returns success'
    mandatory: true
  - id: AC1.2.5
    epic: 1
    epic_name: phase0-setup
    description: 'structlog logging configured'
    mandatory: true
  - id: AC1.3.1
    epic: 1
    epic_name: phase0-setup
    description: 'Next.js App Router files exist'
    mandatory: true
  - id: AC1.3.2
    epic: 1
    epic_name: phase0-setup
    description: 'TailwindCSS configuration exists'
    mandatory: true
  - id: AC1.3.3
    epic: 1
    epic_name: phase0-setup
    description: 'Ping-pong page exists'
    mandatory: true
  - id: AC1.3.4
    epic: 1
    epic_name: phase0-setup
    description: 'TanStack Query dependency configured'
    mandatory: true
  - id: AC1.4.1
    epic: 1
    epic_name: phase0-setup
    description: 'docker-compose.yml integrity valid'
    mandatory: true
  - id: AC1.4.2
    epic: 1
    epic_name: phase0-setup
    description: 'PostgreSQL 15 container defined'
    mandatory: true
  - id: AC1.4.3
    epic: 1
    epic_name: phase0-setup
    description: 'Redis 7 container defined'
    mandatory: true
  - id: AC1.4.4
    epic: 1
    epic_name: phase0-setup
    description: 'Data volumes configured'
    mandatory: true
  - id: AC1.5.1
    epic: 1
    epic_name: phase0-setup
    description: 'Backend startup command path is valid'
    mandatory: true
  - id: AC1.5.2
    epic: 1
    epic_name: phase0-setup
    description: 'Frontend startup command path is valid'
    mandatory: true
  - id: AC1.5.3
    epic: 1
    epic_name: phase0-setup
    description: 'Health endpoint returns 200'
    mandatory: true
  - id: AC1.5.4
    epic: 1
    epic_name: phase0-setup
    description: 'Backend ping-pong endpoint toggles state correctly'
    mandatory: true
  - id: AC1.5.5
    epic: 1
    epic_name: phase0-setup
    description: 'User registration/login API available'
    mandatory: true
  - id: AC1.6.1
    epic: 1
    epic_name: phase0-setup
    description: 'Pre-commit hooks configuration present'
    mandatory: true
  - id: AC1.7.1
    epic: 1
    epic_name: phase0-setup
    description: 'Register endpoint accepts valid user payload'
    mandatory: true
  - id: AC1.7.2
    epic: 1
    epic_name: phase0-setup
    description: 'Register endpoint rejects duplicate email'
    mandatory: true
  - id: AC1.7.3
    epic: 1
    epic_name: phase0-setup
    description: 'Login endpoint accepts valid credentials'
    mandatory: true
  - id: AC1.8.1
    epic: 1
    epic_name: phase0-setup
    description: 'User Management Endpoint Tests'
    mandatory: true
  # EPIC-002: double-entry-core
  - id: AC2.1.1
    epic: 2
    epic_name: double-entry-core
    description: 'Create account with valid data'
    mandatory: true
  - id: AC2.1.2
    epic: 2
    epic_name: double-entry-core
    description: 'Get account by ID'
    mandatory: true
  - id: AC2.1.3
    epic: 2
    epic_name: double-entry-core
    description: 'Get non-existent account fails'
    mandatory: true
  - id: AC2.1.4
    epic: 2
    epic_name: double-entry-core
    description: 'Update account successfully'
    mandatory: true
  - id: AC2.1.5
    epic: 2
    epic_name: double-entry-core
    description: 'Update non-existent account fails'
    mandatory: true
  - id: AC2.1.6
    epic: 2
    epic_name: double-entry-core
    description: 'List accounts with filters'
    mandatory: true
  - id: AC2.2.1
    epic: 2
    epic_name: double-entry-core
    description: 'Balanced entry passes validation'
    mandatory: true
  - id: AC2.2.2
    epic: 2
    epic_name: double-entry-core
    description: 'Unbalanced entry fails validation'
    mandatory: true
  - id: AC2.2.3
    epic: 2
    epic_name: double-entry-core
    description: 'Single-line entry fails (minimum 2 lines)'
    mandatory: true
  - id: AC2.2.4
    epic: 2
    epic_name: double-entry-core
    description: 'Decimal precision maintained'
    mandatory: true
  - id: AC2.2.5
    epic: 2
    epic_name: double-entry-core
    description: 'FX rate required for non-base currency'
    mandatory: true
  - id: AC2.2.6
    epic: 2
    epic_name: double-entry-core
    description: 'Unbalanced post attempt fails'
    mandatory: true
  - id: AC2.3.1
    epic: 2
    epic_name: double-entry-core
    description: 'Post draft entry successfully'
    mandatory: true
  - id: AC2.3.2
    epic: 2
    epic_name: double-entry-core
    description: 'Post already-posted entry fails'
    mandatory: true
  - id: AC2.3.3
    epic: 2
    epic_name: double-entry-core
    description: 'Posted entry cannot be reposted'
    mandatory: true
  - id: AC2.3.4
    epic: 2
    epic_name: double-entry-core
    description: 'Posted entry status immutable'
    mandatory: true
  - id: AC2.3.5
    epic: 2
    epic_name: double-entry-core
    description: 'Void entry creates reversal'
    mandatory: true
  - id: AC2.4.1
    epic: 2
    epic_name: double-entry-core
    description: 'Calculate balance for asset account'
    mandatory: true
  - id: AC2.4.2
    epic: 2
    epic_name: double-entry-core
    description: 'Calculate balance for income account'
    mandatory: true
  - id: AC2.4.3
    epic: 2
    epic_name: double-entry-core
    description: 'Draft entries excluded from balance'
    mandatory: true
  - id: AC2.4.4
    epic: 2
    epic_name: double-entry-core
    description: 'Calculate balances by account type'
    mandatory: true
  - id: AC2.4.5
    epic: 2
    epic_name: double-entry-core
    description: 'Empty account list returns empty balances'
    mandatory: true
  - id: AC2.5.1
    epic: 2
    epic_name: double-entry-core
    description: 'Accounting equation holds with all types'
    mandatory: true
  - id: AC2.5.2
    epic: 2
    epic_name: double-entry-core
    description: 'Equation violation detected'
    mandatory: true
  - id: AC2.5.3
    epic: 2
    epic_name: double-entry-core
    description: 'Accounting equation holds after transactions'
    mandatory: true
  - id: AC2.6.1
    epic: 2
    epic_name: double-entry-core
    description: 'Maximum amount (999,999,999.99)'
    mandatory: true
  - id: AC2.6.2
    epic: 2
    epic_name: double-entry-core
    description: 'Minimum amount (0.01)'
    mandatory: true
  - id: AC2.6.3
    epic: 2
    epic_name: double-entry-core
    description: 'Decimal precision loss detection'
    mandatory: true
  - id: AC2.6.4
    epic: 2
    epic_name: double-entry-core
    description: 'Many-line complex entry (salary breakdown)'
    mandatory: true
  - id: AC2.7.1
    epic: 2
    epic_name: double-entry-core
    description: 'Router uses flush not commit'
    mandatory: true
  - id: AC2.7.2
    epic: 2
    epic_name: double-entry-core
    description: 'Journal router error paths'
    mandatory: true
  - id: AC2.7.3
    epic: 2
    epic_name: double-entry-core
    description: 'Journal router additional scenarios'
    mandatory: true
  - id: AC2.8.1
    epic: 2
    epic_name: double-entry-core
    description: 'Never use float for monetary amounts'
    mandatory: true
  - id: AC2.8.2
    epic: 2
    epic_name: double-entry-core
    description: 'Decimal precision maintained in arithmetic'
    mandatory: true
  - id: AC2.9.1
    epic: 2
    epic_name: double-entry-core
    description: 'Account model supports required fields and types'
    mandatory: true
  - id: AC2.9.2
    epic: 2
    epic_name: double-entry-core
    description: 'JournalEntry model supports required fields and status flow'
    mandatory: true
  - id: AC2.9.3
    epic: 2
    epic_name: double-entry-core
    description: 'JournalLine enforces debit/credit + amount rules'
    mandatory: true
  - id: AC2.9.4
    epic: 2
    epic_name: double-entry-core
    description: 'Pydantic account/journal schemas validated'
    mandatory: true
  - id: AC2.10.1
    epic: 2
    epic_name: double-entry-core
    description: 'POST /accounts, GET /accounts, GET /accounts/{id}, PUT /accounts/{id}'
    mandatory: true
  - id: AC2.10.2
    epic: 2
    epic_name: double-entry-core
    description: 'POST /journal-entries, GET /journal-entries, GET /journal-entries/{id}'
    mandatory: true
  - id: AC2.10.3
    epic: 2
    epic_name: double-entry-core
    description: 'POST /journal-entries/{id}/post, POST /journal-entries/{id}/void'
    mandatory: true
  - id: AC2.10.4
    epic: 2
    epic_name: double-entry-core
    description: 'API error behavior for missing/invalid resources'
    mandatory: true
  - id: AC2.11.1
    epic: 2
    epic_name: double-entry-core
    description: '–2.11.3, AC2.11.5–2.11.6 removed as intra-EPIC summary duplicates; traced in AC2.5, AC2.2, AC2.8, AC2.3 respectively)'
    mandatory: true
  - id: AC2.11.4
    epic: 2
    epic_name: double-entry-core
    description: 'Multi-currency requires fx_rate'
    mandatory: true
  - id: AC2.11.5
    epic: 2
    epic_name: double-entry-core
    description: '–2.11.6 removed as intra-EPIC summary duplicates; traced in AC2.5, AC2.2, AC2.8, AC2.3 respectively)'
    mandatory: true
  - id: AC2.12.6
    epic: 2
    epic_name: double-entry-core
    description: 'Statement Validation Logic Tests'
    mandatory: true
  # EPIC-003: statement-parsing
  - id: AC3.1.1
    epic: 3
    epic_name: statement-parsing
    description: 'Parse DBS PDF'
    mandatory: true
  - id: AC3.1.2
    epic: 3
    epic_name: statement-parsing
    description: 'Parse CSV (DBS)'
    mandatory: true
  - id: AC3.1.3
    epic: 3
    epic_name: statement-parsing
    description: 'Parse CSV (Wise)'
    mandatory: true
  - id: AC3.1.4
    epic: 3
    epic_name: statement-parsing
    description: 'Parse CSV (Generic)'
    mandatory: true
  - id: AC3.1.5
    epic: 3
    epic_name: statement-parsing
    description: 'Parse CSV with BOM'
    mandatory: true
  - id: AC3.2.1
    epic: 3
    epic_name: statement-parsing
    description: 'Balance Validation (Pass)'
    mandatory: true
  - id: AC3.2.2
    epic: 3
    epic_name: statement-parsing
    description: 'Balance Validation (Fail)'
    mandatory: true
  - id: AC3.2.3
    epic: 3
    epic_name: statement-parsing
    description: 'Completeness Validation'
    mandatory: true
  - id: AC3.3.1
    epic: 3
    epic_name: statement-parsing
    description: 'High Confidence (Auto-Accept)'
    mandatory: true
  - id: AC3.3.2
    epic: 3
    epic_name: statement-parsing
    description: 'Medium Confidence (Review)'
    mandatory: true
  - id: AC3.3.3
    epic: 3
    epic_name: statement-parsing
    description: 'Low Confidence (Manual)'
    mandatory: true
  - id: AC3.4.1
    epic: 3
    epic_name: statement-parsing
    description: 'Invalid Parse Not Persisted'
    mandatory: true
  - id: AC3.4.2
    epic: 3
    epic_name: statement-parsing
    description: 'Unsupported File Type'
    mandatory: true
  - id: AC3.4.3
    epic: 3
    epic_name: statement-parsing
    description: 'Extraction Timeout'
    mandatory: true
  - id: AC3.5.1
    epic: 3
    epic_name: statement-parsing
    description: 'Full Upload Flow'
    mandatory: true
  - id: AC3.5.2
    epic: 3
    epic_name: statement-parsing
    description: 'File Size Limit'
    mandatory: true
  - id: AC3.5.3
    epic: 3
    epic_name: statement-parsing
    description: 'Model Selection Flow'
    mandatory: true
  - id: AC3.5.4
    epic: 3
    epic_name: statement-parsing
    description: 'Extraction Flow Tests'
    mandatory: true
  - id: AC3.5.5
    epic: 3
    epic_name: statement-parsing
    description: 'Statement Parsing Supervisor'
    mandatory: true
  # EPIC-004: reconciliation-engine
  - id: AC4.1.1
    epic: 4
    epic_name: reconciliation-engine
    description: 'Exact Matching'
    mandatory: true
  - id: AC4.1.2
    epic: 4
    epic_name: reconciliation-engine
    description: 'Fuzzy Date Matching'
    mandatory: true
  - id: AC4.1.3
    epic: 4
    epic_name: reconciliation-engine
    description: 'Amount Tolerance'
    mandatory: true
  - id: AC4.1.4
    epic: 4
    epic_name: reconciliation-engine
    description: 'Description Similarity'
    mandatory: true
  - id: AC4.2.1
    epic: 4
    epic_name: reconciliation-engine
    description: 'Many-to-One (Batch Payment)'
    mandatory: true
  - id: AC4.2.2
    epic: 4
    epic_name: reconciliation-engine
    description: 'Many-to-One Bonus'
    mandatory: true
  - id: AC4.2.3
    epic: 4
    epic_name: reconciliation-engine
    description: 'One-to-Many (Split)'
    mandatory: true
  - id: AC4.3.1
    epic: 4
    epic_name: reconciliation-engine
    description: 'Auto-Accept Logic'
    mandatory: true
  - id: AC4.3.2
    epic: 4
    epic_name: reconciliation-engine
    description: 'Review Queue Logic'
    mandatory: true
  - id: AC4.3.3
    epic: 4
    epic_name: reconciliation-engine
    description: 'Batch Accept'
    mandatory: true
  - id: AC4.4.1
    epic: 4
    epic_name: reconciliation-engine
    description: 'Large Batch Performance (1,000 txns)'
    mandatory: true
  - id: AC4.4.2
    epic: 4
    epic_name: reconciliation-engine
    description: 'Cross-Period Matching'
    mandatory: true
  - id: AC4.5.1
    epic: 4
    epic_name: reconciliation-engine
    description: 'Anomaly Detection Core'
    mandatory: true
  # EPIC-005: reporting-visualization
  - id: AC5.1.1
    epic: 5
    epic_name: reporting-visualization
    description: 'Accounting Equation'
    mandatory: true
  - id: AC5.1.2
    epic: 5
    epic_name: reporting-visualization
    description: 'FX Unrealized Gain'
    mandatory: true
  - id: AC5.1.3
    epic: 5
    epic_name: reporting-visualization
    description: 'Multi-Currency Aggregation'
    mandatory: true
  - id: AC5.1.4
    epic: 5
    epic_name: reporting-visualization
    description: 'Endpoint Response'
    mandatory: true
  - id: AC5.2.1
    epic: 5
    epic_name: reporting-visualization
    description: 'Net Income Calculation'
    mandatory: true
  - id: AC5.2.2
    epic: 5
    epic_name: reporting-visualization
    description: 'Comprehensive Income'
    mandatory: true
  - id: AC5.2.3
    epic: 5
    epic_name: reporting-visualization
    description: 'Date Range Filtering'
    mandatory: true
  - id: AC5.3.1
    epic: 5
    epic_name: reporting-visualization
    description: 'Statement Generation'
    mandatory: true
  - id: AC5.3.2
    epic: 5
    epic_name: reporting-visualization
    description: 'Empty Period Handling'
    mandatory: true
  - id: AC5.4.1
    epic: 5
    epic_name: reporting-visualization
    description: 'FX Fallbacks'
    mandatory: true
  - id: AC5.4.2
    epic: 5
    epic_name: reporting-visualization
    description: 'Balance Sheet Net Income FX Fallback'
    mandatory: true
  - id: AC5.5.1
    epic: 5
    epic_name: reporting-visualization
    description: 'Report Generation Error'
    mandatory: true
  - id: AC5.5.2
    epic: 5
    epic_name: reporting-visualization
    description: 'Router Error Handling'
    mandatory: true
  # EPIC-006: ai-advisor
  - id: AC6.1.1
    epic: 6
    epic_name: ai-advisor
    description: 'Prompt injection detection'
    mandatory: true
  - id: AC6.1.2
    epic: 6
    epic_name: ai-advisor
    description: 'Sensitive information detection'
    mandatory: true
  - id: AC6.1.3
    epic: 6
    epic_name: ai-advisor
    description: 'Write request detection'
    mandatory: true
  - id: AC6.1.4
    epic: 6
    epic_name: ai-advisor
    description: 'Non-financial query detection'
    mandatory: true
  - id: AC6.1.5
    epic: 6
    epic_name: ai-advisor
    description: 'Prompt injection negative cases'
    mandatory: true
  - id: AC6.2.1
    epic: 6
    epic_name: ai-advisor
    description: 'Chinese language detection'
    mandatory: true
  - id: AC6.2.2
    epic: 6
    epic_name: ai-advisor
    description: 'English language detection'
    mandatory: true
  - id: AC6.2.3
    epic: 6
    epic_name: ai-advisor
    description: 'Chinese suggestions'
    mandatory: true
  - id: AC6.2.4
    epic: 6
    epic_name: ai-advisor
    description: 'English suggestions'
    mandatory: true
  - id: AC6.2.5
    epic: 6
    epic_name: ai-advisor
    description: 'Auto-detect Chinese'
    mandatory: true
  - id: AC6.2.6
    epic: 6
    epic_name: ai-advisor
    description: 'Auto-detect English'
    mandatory: true
  - id: AC6.3.1
    epic: 6
    epic_name: ai-advisor
    description: 'Disclaimer appended once'
    mandatory: true
  - id: AC6.3.2
    epic: 6
    epic_name: ai-advisor
    description: 'Disclaimer respects existing'
    mandatory: true
  - id: AC6.4.1
    epic: 6
    epic_name: ai-advisor
    description: 'Get or create existing session'
    mandatory: true
  - id: AC6.4.2
    epic: 6
    epic_name: ai-advisor
    description: 'Session not found raises error'
    mandatory: true
  - id: AC6.4.3
    epic: 6
    epic_name: ai-advisor
    description: 'Load history skips system messages'
    mandatory: true
  - id: AC6.4.4
    epic: 6
    epic_name: ai-advisor
    description: 'Record message sets title'
    mandatory: true
  - id: AC6.4.5
    epic: 6
    epic_name: ai-advisor
    description: 'Delete session success'
    mandatory: true
  - id: AC6.4.6
    epic: 6
    epic_name: ai-advisor
    description: 'Delete session not found'
    mandatory: true
  - id: AC6.5.1
    epic: 6
    epic_name: ai-advisor
    description: 'Chat suggestions endpoint (EN)'
    mandatory: true
  - id: AC6.5.2
    epic: 6
    epic_name: ai-advisor
    description: 'Chat suggestions endpoint (ZH)'
    mandatory: true
  - id: AC6.5.3
    epic: 6
    epic_name: ai-advisor
    description: 'Chat error handling - API unavailable'
    mandatory: true
  - id: AC6.5.4
    epic: 6
    epic_name: ai-advisor
    description: 'Chat error handling - session not found'
    mandatory: true
  - id: AC6.5.5
    epic: 6
    epic_name: ai-advisor
    description: 'Chat error handling - bad request'
    mandatory: true
  - id: AC6.5.6
    epic: 6
    epic_name: ai-advisor
    description: 'Chat with model name header'
    mandatory: true
  - id: AC6.5.7
    epic: 6
    epic_name: ai-advisor
    description: 'Chat without model name header'
    mandatory: true
  - id: AC6.6.1
    epic: 6
    epic_name: ai-advisor
    description: 'Response cache TTL'
    mandatory: true
  - id: AC6.6.2
    epic: 6
    epic_name: ai-advisor
    description: 'Response cache prune'
    mandatory: true
  - id: AC6.6.3
    epic: 6
    epic_name: ai-advisor
    description: 'Chat stream uses cached response'
    mandatory: true
  - id: AC6.7.1
    epic: 6
    epic_name: ai-advisor
    description: 'Stream API key fallback'
    mandatory: true
  - id: AC6.7.2
    epic: 6
    epic_name: ai-advisor
    description: 'Stream raises when all fail'
    mandatory: true
  - id: AC6.7.3
    epic: 6
    epic_name: ai-advisor
    description: 'Chat stream requires API key'
    mandatory: true
  - id: AC6.7.4
    epic: 6
    epic_name: ai-advisor
    description: 'Stream redactor masks sensitive sequences'
    mandatory: true
  - id: AC6.7.5
    epic: 6
    epic_name: ai-advisor
    description: 'Stream redactor flushes tail'
    mandatory: true
  - id: AC6.7.6
    epic: 6
    epic_name: ai-advisor
    description: 'Stream redactor flush empty'
    mandatory: true
  - id: AC6.7.7
    epic: 6
    epic_name: ai-advisor
    description: 'Chat stream refusal branches'
    mandatory: true
  - id: AC6.8.1
    epic: 6
    epic_name: ai-advisor
    description: 'Financial context handles report errors'
    mandatory: true
  - id: AC6.8.2
    epic: 6
    epic_name: ai-advisor
    description: 'Financial context filters by user'
    mandatory: true
  - id: AC6.8.3
    epic: 6
    epic_name: ai-advisor
    description: 'Build refusal defaults to non-financial'
    mandatory: true
  - id: AC6.8.4
    epic: 6
    epic_name: ai-advisor
    description: 'Stream and store records response'
    mandatory: true
  - id: AC6.9.1
    epic: 6
    epic_name: ai-advisor
    description: 'Stream and store raises on stream error'
    mandatory: true
  - id: AC6.9.2
    epic: 6
    epic_name: ai-advisor
    description: 'Chat stream success path uses stream'
    mandatory: true
  - id: AC6.10.1
    epic: 6
    epic_name: ai-advisor
    description: 'Question normalization'
    mandatory: true
  - id: AC6.10.2
    epic: 6
    epic_name: ai-advisor
    description: 'Token estimation'
    mandatory: true
  - id: AC6.10.3
    epic: 6
    epic_name: ai-advisor
    description: 'Redact sensitive information'
    mandatory: true
  - id: AC6.10.4
    epic: 6
    epic_name: ai-advisor
    description: 'Chunk text splits text'
    mandatory: true
  - id: AC6.11.1
    epic: 6
    epic_name: ai-advisor
    description: 'Model catalog integration'
    mandatory: true
  - id: AC6.11.2
    epic: 6
    epic_name: ai-advisor
    description: 'Model validation integration'
    mandatory: true
  - id: AC6.11.3
    epic: 6
    epic_name: ai-advisor
    description: 'Model catalog caching'
    mandatory: true
  - id: AC6.12.1
    epic: 6
    epic_name: ai-advisor
    description: 'AI cannot modify ledger'
    mandatory: true
  - id: AC6.12.2
    epic: 6
    epic_name: ai-advisor
    description: 'Answers based on real data'
    mandatory: true
  - id: AC6.12.3
    epic: 6
    epic_name: ai-advisor
    description: 'Clear disclaimer'
    mandatory: true
  - id: AC6.12.4
    epic: 6
    epic_name: ai-advisor
    description: 'Support Chinese & English'
    mandatory: true
  - id: AC6.12.5
    epic: 6
    epic_name: ai-advisor
    description: 'OpenRouter API error handling'
    mandatory: true
  - id: AC6.12.6
    epic: 6
    epic_name: ai-advisor
    description: 'Session isolation'
    mandatory: true
  # EPIC-008: testing-strategy
  - id: AC8.1.1
    epic: 8
    epic_name: testing-strategy
    description: 'API health check'
    mandatory: true
  - id: AC8.1.2
    epic: 8
    epic_name: testing-strategy
    description: 'Backend service reachable'
    mandatory: true
  - id: AC8.1.3
    epic: 8
    epic_name: testing-strategy
    description: 'Frontend service reachable'
    mandatory: true
  - id: AC8.1.4
    epic: 8
    epic_name: testing-strategy
    description: 'Database connectivity'
    mandatory: true
  - id: AC8.2.1
    epic: 8
    epic_name: testing-strategy
    description: 'New User Registration'
    mandatory: true
  - id: AC8.2.2
    epic: 8
    epic_name: testing-strategy
    description: 'Create Cash Account'
    mandatory: true
  - id: AC8.2.3
    epic: 8
    epic_name: testing-strategy
    description: 'Create Bank Account'
    mandatory: true
  - id: AC8.2.4
    epic: 8
    epic_name: testing-strategy
    description: 'Update account'
    mandatory: true
  - id: AC8.2.5
    epic: 8
    epic_name: testing-strategy
    description: 'Delete account'
    mandatory: true
  - id: AC8.3.1
    epic: 8
    epic_name: testing-strategy
    description: 'Simple Expense Entry'
    mandatory: true
  - id: AC8.3.2
    epic: 8
    epic_name: testing-strategy
    description: 'Void Entry'
    mandatory: true
  - id: AC8.3.3
    epic: 8
    epic_name: testing-strategy
    description: 'Post Draft Entry'
    mandatory: true
  - id: AC8.3.4
    epic: 8
    epic_name: testing-strategy
    description: 'Unbalanced Entry Rejected'
    mandatory: true
  - id: AC8.3.5
    epic: 8
    epic_name: testing-strategy
    description: 'Journal Entry CRUD'
    mandatory: true
  - id: AC8.4.1
    epic: 8
    epic_name: testing-strategy
    description: 'Statement upload (CSV)'
    mandatory: true
  - id: AC8.4.2
    epic: 8
    epic_name: testing-strategy
    description: 'Statement list and get'
    mandatory: true
  - id: AC8.4.3
    epic: 8
    epic_name: testing-strategy
    description: 'Statement full flow'
    mandatory: true
  - id: AC8.5.1
    epic: 8
    epic_name: testing-strategy
    description: 'Reconciliation engine runs'
    mandatory: true
  - id: AC8.5.2
    epic: 8
    epic_name: testing-strategy
    description: 'Reconciliation stats endpoint'
    mandatory: true
  - id: AC8.5.3
    epic: 8
    epic_name: testing-strategy
    description: 'Match acceptance'
    mandatory: true
  - id: AC8.6.1
    epic: 8
    epic_name: testing-strategy
    description: 'View Balance Sheet'
    mandatory: true
  - id: AC8.6.2
    epic: 8
    epic_name: testing-strategy
    description: 'View Income Statement'
    mandatory: true
  - id: AC8.6.3
    epic: 8
    epic_name: testing-strategy
    description: 'View Cash Flow Report'
    mandatory: true
  - id: AC8.6.4
    epic: 8
    epic_name: testing-strategy
    description: 'Report navigation (all endpoints)'
    mandatory: true
  - id: AC8.7.1
    epic: 8
    epic_name: testing-strategy
    description: 'API authentication failures'
    mandatory: true
  - id: AC8.7.2
    epic: 8
    epic_name: testing-strategy
    description: 'Unauthorized access blocked'
    mandatory: true
  - id: AC8.7.3
    epic: 8
    epic_name: testing-strategy
    description: 'User session management'
    mandatory: true
  - id: AC8.8.1
    epic: 8
    epic_name: testing-strategy
    description: 'API health check'
    mandatory: true
  - id: AC8.8.2
    epic: 8
    epic_name: testing-strategy
    description: 'Accounts CRUD API'
    mandatory: true
  - id: AC8.8.3
    epic: 8
    epic_name: testing-strategy
    description: 'Journal entry lifecycle API'
    mandatory: true
  - id: AC8.8.4
    epic: 8
    epic_name: testing-strategy
    description: 'Reports API'
    mandatory: true
  - id: AC8.8.5
    epic: 8
    epic_name: testing-strategy
    description: 'Reconciliation API'
    mandatory: true
  - id: AC8.9.1
    epic: 8
    epic_name: testing-strategy
    description: 'PR workflow runs E2E tests'
    mandatory: true
  - id: AC8.9.2
    epic: 8
    epic_name: testing-strategy
    description: 'Smoke tests integrated'
    mandatory: true
  - id: AC8.9.3
    epic: 8
    epic_name: testing-strategy
    description: 'Critical test check'
    mandatory: true
  - id: AC8.9.4
    epic: 8
    epic_name: testing-strategy
    description: 'Environment isolation'
    mandatory: true
  - id: AC8.10.1
    epic: 8
    epic_name: testing-strategy
    description: 'Health endpoint reachable'
    mandatory: true
  - id: AC8.10.2
    epic: 8
    epic_name: testing-strategy
    description: 'User can create account'
    mandatory: true
  - id: AC8.10.3
    epic: 8
    epic_name: testing-strategy
    description: 'User can create journal entry'
    mandatory: true
  - id: AC8.10.4
    epic: 8
    epic_name: testing-strategy
    description: 'Statement upload triggers AI'
    mandatory: true
  - id: AC8.10.5
    epic: 8
    epic_name: testing-strategy
    description: 'Reconciliation engine runs'
    mandatory: true
  - id: AC8.10.6
    epic: 8
    epic_name: testing-strategy
    description: 'Unbalanced entry rejected'
    mandatory: true
  - id: AC8.10.7
    epic: 8
    epic_name: testing-strategy
    description: 'Reports API accessible'
    mandatory: true
  - id: AC8.10.8
    epic: 8
    epic_name: testing-strategy
    description: 'User registration flow'
    mandatory: true
  - id: AC8.10.9
    epic: 8
    epic_name: testing-strategy
    description: 'Authentication validation'
    mandatory: true
  # EPIC-011: asset-lifecycle
  - id: AC11.1.1
    epic: 11
    epic_name: asset-lifecycle
    description: 'Reconcile creates new position'
    mandatory: true
  - id: AC11.1.2
    epic: 11
    epic_name: asset-lifecycle
    description: 'Reconcile updates existing position quantity'
    mandatory: true
  - id: AC11.1.3
    epic: 11
    epic_name: asset-lifecycle
    description: 'Reconcile disposes position when quantity is 0'
    mandatory: true
  - id: AC11.1.4
    epic: 11
    epic_name: asset-lifecycle
    description: 'Cost basis is set from market_value'
    mandatory: true
  - id: AC11.1.5
    epic: 11
    epic_name: asset-lifecycle
    description: 'Reconcile multiple different assets'
    mandatory: true
  - id: AC11.1.6
    epic: 11
    epic_name: asset-lifecycle
    description: 'Same asset at different brokers creates separate positions'
    mandatory: true
  - id: AC11.1.7
    epic: 11
    epic_name: asset-lifecycle
    description: 'Null broker name handled correctly'
    mandatory: true
  - id: AC11.1.8
    epic: 11
    epic_name: asset-lifecycle
    description: 'Disposed position can be reactivated'
    mandatory: true
  - id: AC11.1.9
    epic: 11
    epic_name: asset-lifecycle
    description: 'Get positions returns empty list when no positions exist'
    mandatory: true
  - id: AC11.1.10
    epic: 11
    epic_name: asset-lifecycle
    description: 'Reconcile with no snapshots does nothing'
    mandatory: true
  - id: AC11.1.11
    epic: 11
    epic_name: asset-lifecycle
    description: 'Negative quantities (short positions) handled correctly'
    mandatory: true
  - id: AC11.1.12
    epic: 11
    epic_name: asset-lifecycle
    description: 'Updated and disposed counts are mutually exclusive'
    mandatory: true
  - id: AC11.2.1
    epic: 11
    epic_name: asset-lifecycle
    description: 'GET /assets/positions returns empty list when no positions'
    mandatory: true
  - id: AC11.2.2
    epic: 11
    epic_name: asset-lifecycle
    description: 'GET /assets/positions returns positions with data'
    mandatory: true
  - id: AC11.2.3
    epic: 11
    epic_name: asset-lifecycle
    description: 'GET /assets/positions filters by status correctly'
    mandatory: true
  - id: AC11.3.1
    epic: 11
    epic_name: asset-lifecycle
    description: 'GET /assets/positions/{id} returns position details'
    mandatory: true
  - id: AC11.3.2
    epic: 11
    epic_name: asset-lifecycle
    description: 'GET /assets/positions/{id} returns 404 for non-existent position'
    mandatory: true
  - id: AC11.3.3
    epic: 11
    epic_name: asset-lifecycle
    description: 'GET /assets/positions/{id} returns 404 for other user''s position'
    mandatory: true
  - id: AC11.4.1
    epic: 11
    epic_name: asset-lifecycle
    description: 'POST /assets/reconcile creates positions from snapshots'
    mandatory: true
  - id: AC11.4.2
    epic: 11
    epic_name: asset-lifecycle
    description: 'POST /assets/reconcile with no snapshots returns 0 counts'
    mandatory: true
  - id: AC11.5.1
    epic: 11
    epic_name: asset-lifecycle
    description: 'GET /assets/positions requires authentication'
    mandatory: true
  - id: AC11.5.2
    epic: 11
    epic_name: asset-lifecycle
    description: 'GET /assets/positions/{id} requires authentication'
    mandatory: true
  - id: AC11.5.3
    epic: 11
    epic_name: asset-lifecycle
    description: 'POST /assets/reconcile requires authentication'
    mandatory: true
  - id: AC11.6.1
    epic: 11
    epic_name: asset-lifecycle
    description: 'GET /assets/positions/{id}/depreciation returns depreciation schedule'
    mandatory: true
  - id: AC11.6.2
    epic: 11
    epic_name: asset-lifecycle
    description: 'GET /assets/positions/{id}/depreciation returns 400 for non-existent position'
    mandatory: true
  - id: AC11.6.3
    epic: 11
    epic_name: asset-lifecycle
    description: 'GET /assets/positions/{id}/depreciation returns 400 for disposed position'
    mandatory: true
  - id: AC11.6.4
    epic: 11
    epic_name: asset-lifecycle
    description: 'GET /assets/positions/{id}/depreciation returns 422 for invalid params'
    mandatory: true
  - id: AC11.7.1
    epic: 11
    epic_name: asset-lifecycle
    description: 'Verify position queries are isolated by user_id'
    mandatory: true
  # EPIC-013: statement-parsing-v2
  - id: AC13.1.1
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test that valid balances pass validation'
    mandatory: true
  - id: AC13.1.2
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test that invalid balances fail validation'
    mandatory: true
  - id: AC13.1.3
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test that small differences are tolerated'
    mandatory: true
  - id: AC13.2.1
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test that complete data gets high confidence (Auto-Accept)'
    mandatory: true
  - id: AC13.2.2
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test that partial data gets medium confidence (Review)'
    mandatory: true
  - id: AC13.2.3
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test that no transactions lowers confidence (Manual)'
    mandatory: true
  - id: AC13.3.1
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test DBS fixture has correct structure'
    mandatory: true
  - id: AC13.3.2
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test DBS fixture balances reconcile'
    mandatory: true
  - id: AC13.3.3
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test MariBank fixture has sanitized merchant names'
    mandatory: true
  - id: AC13.3.4
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test GXS fixture has daily interest entries'
    mandatory: true
  - id: AC13.3.5
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test all fixtures have valid dates'
    mandatory: true
  - id: AC13.4.1
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test default parsing prompt'
    mandatory: true
  - id: AC13.4.2
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test DBS-specific prompt'
    mandatory: true
  - id: AC13.4.3
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test CMB-specific prompt'
    mandatory: true
  - id: AC13.4.4
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test with unknown institution returns base prompt'
    mandatory: true
  - id: AC13.4.5
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test Futu-specific prompt'
    mandatory: true
  - id: AC13.4.6
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test GXS-specific prompt'
    mandatory: true
  - id: AC13.4.7
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test MariBank-specific prompt'
    mandatory: true
  - id: AC13.5.1
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test that PDFs use OpenRouter ''file'' type'
    mandatory: true
  - id: AC13.5.2
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test that PNG images use ''image_url'' type'
    mandatory: true
  - id: AC13.5.3
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test that JPG images use ''image_url'' type'
    mandatory: true
  - id: AC13.5.4
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test that JPEG images use ''image_url'' type'
    mandatory: true
  - id: AC13.6.1
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test that CSV parsing raises error when institution is None'
    mandatory: true
  - id: AC13.6.2
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test that parse_document accepts institution=None for PDFs (AI auto-detect)'
    mandatory: true
  - id: AC13.6.3
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test that parse_document accepts force_model parameter'
    mandatory: true
  - id: AC13.7.1
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test event confidence with complete data'
    mandatory: true
  - id: AC13.7.2
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test event confidence with missing fields'
    mandatory: true
  - id: AC13.7.3
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test event confidence with invalid date format'
    mandatory: true
  - id: AC13.7.4
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test event confidence with null date'
    mandatory: true
  - id: AC13.7.5
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test _safe_date with valid input'
    mandatory: true
  - id: AC13.7.6
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test _safe_date with invalid format'
    mandatory: true
  - id: AC13.7.7
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test _safe_date with empty input'
    mandatory: true
  - id: AC13.7.8
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test _safe_decimal with valid input'
    mandatory: true
  - id: AC13.7.9
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test _safe_decimal with invalid input'
    mandatory: true
  - id: AC13.7.10
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test _safe_decimal with None'
    mandatory: true
  - id: AC13.7.11
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test _safe_decimal None required'
    mandatory: true
  - id: AC13.7.12
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test compute_confidence with missing transactions key'
    mandatory: true
  - id: AC13.8.1
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test consistent chain scores 10'
    mandatory: true
  - id: AC13.8.2
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test inconsistent chain scores 0'
    mandatory: true
  - id: AC13.8.3
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test single transaction'
    mandatory: true
  - id: AC13.8.4
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test no balance after'
    mandatory: true
  - id: AC13.8.5
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test empty list'
    mandatory: true
  - id: AC13.8.6
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test partial consistency'
    mandatory: true
  - id: AC13.8.7
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test all currencies match'
    mandatory: true
  - id: AC13.8.8
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test no currencies match'
    mandatory: true
  - id: AC13.8.9
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test no header currency'
    mandatory: true
  - id: AC13.8.10
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test no currencies in transactions'
    mandatory: true
  - id: AC13.8.11
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test empty list (currency)'
    mandatory: true
  - id: AC13.8.12
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test mixed currencies partial'
    mandatory: true
  - id: AC13.8.13
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test missing currencies penalized'
    mandatory: true
  - id: AC13.9.1
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test full score with all factors'
    mandatory: true
  - id: AC13.9.2
    epic: 13
    epic_name: statement-parsing-v2
    description: 'Test no new factors caps at 85'
    mandatory: true
  # EPIC-015: processing-account
  - id: AC15.1.1
    epic: 15
    epic_name: processing-account
    description: 'Processing Account Created'
    mandatory: true
  - id: AC15.1.2
    epic: 15
    epic_name: processing-account
    description: 'Idempotent Creation'
    mandatory: true
  - id: AC15.1.3
    epic: 15
    epic_name: processing-account
    description: 'Hidden from User Accounts'
    mandatory: true
  - id: AC15.1.4
    epic: 15
    epic_name: processing-account
    description: 'Per-User Isolation'
    mandatory: true
  - id: AC15.2.1
    epic: 15
    epic_name: processing-account
    description: 'Transfer OUT Entry'
    mandatory: true
  - id: AC15.2.2
    epic: 15
    epic_name: processing-account
    description: 'Transfer IN Entry'
    mandatory: true
  - id: AC15.2.3
    epic: 15
    epic_name: processing-account
    description: 'Paired Transfers Zero Balance'
    mandatory: true
  - id: AC15.3.1
    epic: 15
    epic_name: processing-account
    description: 'Unpaired Transfer Visible'
    mandatory: true
  - id: AC15.3.2
    epic: 15
    epic_name: processing-account
    description: 'Accounting Equation Holds'
    mandatory: true
  - id: AC15.4.1
    epic: 15
    epic_name: processing-account
    description: 'Keyword Detection'
    mandatory: true
  - id: AC15.4.2
    epic: 15
    epic_name: processing-account
    description: 'Non-Transfer Detection'
    mandatory: true
  - id: AC15.4.3
    epic: 15
    epic_name: processing-account
    description: 'Auto-Pairing Above Threshold'
    mandatory: true
  - id: AC15.5.1
    epic: 15
    epic_name: processing-account
    description: 'Amount Scoring (Exact)'
    mandatory: true
  - id: AC15.5.2
    epic: 15
    epic_name: processing-account
    description: 'Amount Scoring (Tiers)'
    mandatory: true
  - id: AC15.5.3
    epic: 15
    epic_name: processing-account
    description: 'Description Scoring'
    mandatory: true
  - id: AC15.5.4
    epic: 15
    epic_name: processing-account
    description: 'Date Scoring'
    mandatory: true
  - id: AC15.6.1
    epic: 15
    epic_name: processing-account
    description: 'Transfer Detection During Reconciliation'
    mandatory: true
  - id: AC15.6.2
    epic: 15
    epic_name: processing-account
    description: 'Transfer Detection Skips (No Account)'
    mandatory: true
  - id: AC15.6.3
    epic: 15
    epic_name: processing-account
    description: 'Transfer IN Detection'
    mandatory: true
  - id: AC15.6.4
    epic: 15
    epic_name: processing-account
    description: 'Auto-Pairing Phase'
    mandatory: true
  - id: AC15.6.5
    epic: 15
    epic_name: processing-account
    description: 'Unpaired Transfer Balance'
    mandatory: true
  - id: AC15.6.6
    epic: 15
    epic_name: processing-account
    description: 'Normal Matching Preserved'
    mandatory: true
  # EPIC-016: two-stage-review-ui
  - id: AC16.1.1
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Balance validation tolerance = 0.001 USD'
    mandatory: true
  - id: AC16.1.2
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Stage 1 UI shows PDF + parsed split view'
    mandatory: true
  - id: AC16.1.3
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Approve button disabled if balance invalid'
    mandatory: true
  - id: AC16.2.1
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Deduplication detection accuracy ≥ 95%'
    mandatory: true
  - id: AC16.2.2
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Transfer pair detection accuracy ≥ 90%'
    mandatory: true
  - id: AC16.2.3
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Batch approve blocked if unresolved checks'
    mandatory: true
  - id: AC16.2.4
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Stage 2 UI supports batch operations'
    mandatory: true
  - id: AC16.3.1
    epic: 16
    epic_name: two-stage-review-ui
    description: 'validate_balance_chain raises ValueError when statement not found'
    mandatory: true
  - id: AC16.3.2
    epic: 16
    epic_name: two-stage-review-ui
    description: '_get_opening_balance falls back to opening_balance when no prev statement exists'
    mandatory: true
  - id: AC16.3.3
    epic: 16
    epic_name: two-stage-review-ui
    description: '_get_opening_balance uses prev statement closing_balance when available'
    mandatory: true
  - id: AC16.3.4
    epic: 16
    epic_name: two-stage-review-ui
    description: 'reject_statement without reason clears validation_error'
    mandatory: true
  - id: AC16.3.5
    epic: 16
    epic_name: two-stage-review-ui
    description: 'edit_and_approve raises ValueError when balance is still invalid after edits'
    mandatory: true
  - id: AC16.3.6
    epic: 16
    epic_name: two-stage-review-ui
    description: '_get_statement_for_update raises ValueError when wrong user_id supplied'
    mandatory: true
  - id: AC16.4.1
    epic: 16
    epic_name: two-stage-review-ui
    description: 'detect_duplicates runs global scan when no statement_id provided'
    mandatory: true
  - id: AC16.4.2
    epic: 16
    epic_name: two-stage-review-ui
    description: 'detect_duplicates is idempotent — does not create duplicate checks on re-run'
    mandatory: true
  - id: AC16.4.3
    epic: 16
    epic_name: two-stage-review-ui
    description: 'detect_transfer_pairs runs global scan when no statement_id provided'
    mandatory: true
  - id: AC16.4.4
    epic: 16
    epic_name: two-stage-review-ui
    description: 'resolve_check raises ValueError on invalid action'
    mandatory: true
  - id: AC16.4.5
    epic: 16
    epic_name: two-stage-review-ui
    description: 'resolve_check raises ValueError when check not found or belongs to wrong user'
    mandatory: true
  - id: AC16.4.6
    epic: 16
    epic_name: two-stage-review-ui
    description: 'resolve_check sets FLAGGED status when action=flag'
    mandatory: true
  - id: AC16.4.7
    epic: 16
    epic_name: two-stage-review-ui
    description: 'get_pending_checks filters results by severity'
    mandatory: true
  - id: AC16.5.1
    epic: 16
    epic_name: two-stage-review-ui
    description: 'getUserId returns null when not set'
    mandatory: true
  - id: AC16.5.2
    epic: 16
    epic_name: two-stage-review-ui
    description: 'getUserId returns stored userId from localStorage'
    mandatory: true
  - id: AC16.5.3
    epic: 16
    epic_name: two-stage-review-ui
    description: 'setUser stores userId, email, and optional token'
    mandatory: true
  - id: AC16.5.4
    epic: 16
    epic_name: two-stage-review-ui
    description: 'clearUser removes all auth keys from localStorage'
    mandatory: true
  - id: AC16.5.5
    epic: 16
    epic_name: two-stage-review-ui
    description: 'isAuthenticated returns false when no token, true when token exists'
    mandatory: true
  - id: AC16.6.1
    epic: 16
    epic_name: two-stage-review-ui
    description: 'formatDateInput formats Date as YYYY-MM-DD with zero-padded month and day'
    mandatory: true
  - id: AC16.7.1
    epic: 16
    epic_name: two-stage-review-ui
    description: 'getTheme returns stored value or system preference'
    mandatory: true
  - id: AC16.7.2
    epic: 16
    epic_name: two-stage-review-ui
    description: 'setTheme adds/removes dark CSS class and saves to localStorage'
    mandatory: true
  - id: AC16.7.3
    epic: 16
    epic_name: two-stage-review-ui
    description: 'toggleTheme switches between dark and light'
    mandatory: true
  - id: AC16.7.4
    epic: 16
    epic_name: two-stage-review-ui
    description: 'initTheme applies stored or system theme on load'
    mandatory: true
  - id: AC16.8.1
    epic: 16
    epic_name: two-stage-review-ui
    description: 'fetchAiModels calls /api/ai/models with no params when no options provided'
    mandatory: true
  - id: AC16.8.2
    epic: 16
    epic_name: two-stage-review-ui
    description: 'fetchAiModels appends modality query param when provided'
    mandatory: true
  - id: AC16.8.3
    epic: 16
    epic_name: two-stage-review-ui
    description: 'fetchAiModels appends free_only=true when freeOnly is set'
    mandatory: true
  - id: AC16.9.1
    epic: 16
    epic_name: two-stage-review-ui
    description: 'useCurrencies returns default currencies while loading'
    mandatory: true
  - id: AC16.9.2
    epic: 16
    epic_name: two-stage-review-ui
    description: 'useCurrencies updates currencies from API response'
    mandatory: true
  - id: AC16.9.3
    epic: 16
    epic_name: two-stage-review-ui
    description: 'useCurrencies falls back to defaults on API error'
    mandatory: true
  - id: AC16.10.1
    epic: 16
    epic_name: two-stage-review-ui
    description: 'apiFetch returns JSON on 200 response'
    mandatory: true
  - id: AC16.10.2
    epic: 16
    epic_name: two-stage-review-ui
    description: 'apiFetch returns undefined on 204 No Content'
    mandatory: true
  - id: AC16.10.3
    epic: 16
    epic_name: two-stage-review-ui
    description: 'apiFetch throws error with detail message on non-ok response'
    mandatory: true
  - id: AC16.10.4
    epic: 16
    epic_name: two-stage-review-ui
    description: 'apiFetch throws on non-JSON error text'
    mandatory: true
  - id: AC16.10.5
    epic: 16
    epic_name: two-stage-review-ui
    description: 'apiFetch calls handle401Redirect on 401 response'
    mandatory: true
  - id: AC16.10.6
    epic: 16
    epic_name: two-stage-review-ui
    description: 'resetRedirectGuard resets the redirect guard state'
    mandatory: true
  - id: AC16.10.7
    epic: 16
    epic_name: two-stage-review-ui
    description: 'apiDelete succeeds on 200 response'
    mandatory: true
  - id: AC16.10.8
    epic: 16
    epic_name: two-stage-review-ui
    description: 'apiDelete throws on non-ok response'
    mandatory: true
  - id: AC16.10.9
    epic: 16
    epic_name: two-stage-review-ui
    description: 'apiStream returns response and sessionId on success'
    mandatory: true
  - id: AC16.10.10
    epic: 16
    epic_name: two-stage-review-ui
    description: 'apiStream throws on non-ok response'
    mandatory: true
  - id: AC16.10.11
    epic: 16
    epic_name: two-stage-review-ui
    description: 'apiUpload returns JSON on 200 response'
    mandatory: true
  - id: AC16.10.12
    epic: 16
    epic_name: two-stage-review-ui
    description: 'apiUpload returns undefined on 204 No Content'
    mandatory: true
  - id: AC16.10.13
    epic: 16
    epic_name: two-stage-review-ui
    description: 'apiFetch normalizes path without leading slash'
    mandatory: true
  - id: AC16.10.14
    epic: 16
    epic_name: two-stage-review-ui
    description: 'apiFetch includes Authorization header when token is present'
    mandatory: true
  - id: AC16.12.1
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Dashboard page shows loading state before API responses resolve'
    mandatory: true
  - id: AC16.12.2
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Dashboard page renders error fallback and retry action when API request fails'
    mandatory: true
  - id: AC16.12.3
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Dashboard page renders KPI, charts, and recent activity when API requests succeed'
    mandatory: true
  - id: AC16.12.4
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Dashboard page renders empty-state copy when trend or activity datasets are empty'
    mandatory: true
  - id: AC16.12.5
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Login page submits login payload and redirects on success'
    mandatory: true
  - id: AC16.12.6
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Login page toggles register mode and switches endpoint for submit'
    mandatory: true
  - id: AC16.12.7
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Login page shows API error messages and resets loading state on failure'
    mandatory: true
  - id: AC16.12.8
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Ping-pong page loads initial state and displays current ping/pong value'
    mandatory: true
  - id: AC16.12.9
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Ping-pong page toggles state and updates toggle count on button click'
    mandatory: true
  - id: AC16.12.10
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Ping-pong page renders retry flow when initial load fails'
    mandatory: true
  - id: AC16.12.11
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Reports page renders all report cards with links for available reports'
    mandatory: true
  - id: AC16.12.12
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Reports page displays accounting equation section content'
    mandatory: true
  - id: AC16.14.1
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Balance-sheet page renders loading and error retry states'
    mandatory: true
  - id: AC16.14.2
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Balance-sheet page renders totals and account sections on successful fetch'
    mandatory: true
  - id: AC16.14.3
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Balance-sheet page toggles account tree expansion controls'
    mandatory: true
  - id: AC16.14.4
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Income-statement page renders loading and error retry states'
    mandatory: true
  - id: AC16.14.5
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Income-statement page renders KPI cards and category lists on success'
    mandatory: true
  - id: AC16.14.6
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Income-statement page tag filters can be selected and cleared'
    mandatory: true
  - id: AC16.14.7
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Cash-flow page renders loading and error retry states'
    mandatory: true
  - id: AC16.14.8
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Cash-flow page renders summary and section cards on success'
    mandatory: true
  - id: AC16.14.9
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Cash-flow page renders sankey chart when summary exists'
    mandatory: true
  - id: AC16.14.10
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Statements page renders loading, error, empty, and populated states'
    mandatory: true
  - id: AC16.14.11
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Statements page enables polling when parsing status is present'
    mandatory: true
  - id: AC16.14.12
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Statements page delete action calls delete API and toast on confirm'
    mandatory: true
  - id: AC16.15.1
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Accounts page renders loading and error retry states'
    mandatory: true
  - id: AC16.15.2
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Accounts page renders grouped account cards and type filters on successful fetch'
    mandatory: true
  - id: AC16.15.3
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Accounts page delete action confirms and calls delete API with success toast'
    mandatory: true
  - id: AC16.15.4
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Assets page renders loading and error retry states'
    mandatory: true
  - id: AC16.15.5
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Assets page renders grouped positions and status filters on successful fetch'
    mandatory: true
  - id: AC16.15.6
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Assets page reconcile action calls API and shows toast summary'
    mandatory: true
  - id: AC16.16.1
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Root page redirects to dashboard'
    mandatory: true
  - id: AC16.16.2
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Main layout renders children through AppShell wrapper'
    mandatory: true
  - id: AC16.16.3
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Chat page renders advisor client within suspense boundary'
    mandatory: true
  - id: AC16.16.4
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Reconciliation entry pages render workbench and unmatched board components'
    mandatory: true
  - id: AC16.16.5
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Journal page renders error state and retries loading entries'
    mandatory: true
  - id: AC16.16.6
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Journal page filters entries by status and renders totals'
    mandatory: true
  - id: AC16.16.7
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Journal page draft actions post and delete entries with API calls'
    mandatory: true
  - id: AC16.16.8
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Journal page void flow submits reason and refreshes entries'
    mandatory: true
  - id: AC16.17.1
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Stage 2 review queue shows failure fallback and supports retry'
    mandatory: true
  - id: AC16.17.2
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Stage 2 review queue indicates unresolved checks and disables batch approval'
    mandatory: true
  - id: AC16.17.3
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Stage 2 review queue performs batch reject and approve API workflows'
    mandatory: true
  - id: AC16.17.4
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Stage 2 review queue resolves consistency checks through dialog actions'
    mandatory: true
  - id: AC16.17.5
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Root layout composes Providers and AuthGuard around children'
    mandatory: true
  - id: AC16.17.6
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Providers wraps children with QueryClientProvider'
    mandatory: true
  - id: AC16.17.7
    epic: 16
    epic_name: two-stage-review-ui
    description: 'API catch-all handlers return JSON 503 for all HTTP methods'
    mandatory: true
  - id: AC16.18.1
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Statement detail page loads statement data and renders parsed transactions summary'
    mandatory: true
  - id: AC16.18.2
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Statement detail page approve and reject actions call corresponding APIs'
    mandatory: true
  - id: AC16.18.3
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Statement detail page retry action posts retry API and refreshes data'
    mandatory: true
  - id: AC16.18.4
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Statement review page shows error fallback and supports retry'
    mandatory: true
  - id: AC16.18.5
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Statement review page disables approve when balance validation fails'
    mandatory: true
  - id: AC16.18.6
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Statement review page approve and reject actions call APIs and navigate back to statements'
    mandatory: true
  - id: AC16.19.1
    epic: 16
    epic_name: two-stage-review-ui
    description: 'App shell renders workspace providers and main content with collapse-aware layout'
    mandatory: true
  - id: AC16.19.2
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Auth guard redirects unauthenticated protected routes and allows public routes'
    mandatory: true
  - id: AC16.19.3
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Sidebar shows auth-aware actions and logout triggers clearUser plus login redirect'
    mandatory: true
  - id: AC16.19.4
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Workspace tabs derive route labels and invoke add/set/remove tab handlers'
    mandatory: true
  - id: AC16.19.5
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Chat page client enforces disclaimer consent and passes initial prompt into chat panel'
    mandatory: true
  - id: AC16.19.6
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Chat widget hides on chat route and toggles panel visibility elsewhere'
    mandatory: true
  - id: AC16.19.7
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Confirm dialog handles required input, cancel, and confirm interactions'
    mandatory: true
  - id: AC16.19.8
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Confirm dialog responds to escape key and backdrop click when not loading'
    mandatory: true
  - id: AC16.19.9
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Toast provider shows, dismisses, and auto-expires notifications'
    mandatory: true
  - id: AC16.19.10
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Bar and pie chart components render semantic labels and filtered data'
    mandatory: true
  - id: AC16.19.11
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Trend chart renders line/area paths and point labels for provided series'
    mandatory: true
  - id: AC16.20.1
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Reconciliation workbench loads stats and pending queue with default selection'
    mandatory: true
  - id: AC16.20.2
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Reconciliation workbench triggers run, accept, reject, and batch accept APIs'
    mandatory: true
  - id: AC16.20.3
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Unmatched board loads transactions and creates journal entry for selected item'
    mandatory: true
  - id: AC16.20.4
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Unmatched board flag and ignore actions update list and local state'
    mandatory: true
  - id: AC16.20.5
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Chat panel sends streaming responses, loads suggestions/history, and clears session'
    mandatory: true
  - id: AC16.21.1
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Account form modal create mode submits normalized payload and closes on success'
    mandatory: true
  - id: AC16.21.2
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Account form modal edit mode pre-fills values and submits update payload'
    mandatory: true
  - id: AC16.21.3
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Account form modal surfaces API errors and field validation feedback'
    mandatory: true
  - id: AC16.21.4
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Journal entry form loads account options and enforces balanced double-entry totals'
    mandatory: true
  - id: AC16.21.5
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Journal entry form creates draft entries with normalized line amounts and optional posting'
    mandatory: true
  - id: AC16.21.6
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Journal entry form supports dynamic line add/remove and submit-time error handling'
    mandatory: true
  - id: AC16.21.7
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Sankey chart builds empty-state and data-state options for inflow and outflow links'
    mandatory: true
  - id: AC16.21.8
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Sankey chart recomputes theme-aware colors when root theme attributes change'
    mandatory: true
  - id: AC16.21.9
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Workspace provider restores tabs from storage and persists active workspace updates'
    mandatory: true
  - id: AC16.21.10
    epic: 16
    epic_name: two-stage-review-ui
    description: 'Workspace provider handles tab deduplication, removal, and cross-tab storage sync'
    mandatory: true
