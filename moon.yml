$schema: 'https://moonrepo.dev/schemas/project.json'

# Root project - defines shared tasks
type: root

tasks:
  # Install all dependencies
  setup:
    command: 'echo "Dependencies installed"'
    deps:
      - 'backend:install'
      - 'frontend:install'

  # Development servers (parallel)
  dev:
    command: 'echo "Starting development servers..."'
    local: true
    deps:
      - 'backend:dev'
      - 'frontend:dev'

  # Lint all projects
  lint:
    command: 'echo "Linting complete"'
    deps:
      - 'backend:lint'
      - 'frontend:lint'

  # Test all projects
  test:
    command: 'echo "All tests complete"'
    deps:
      - 'backend:test'
      - 'frontend:test'

  # Build all projects
  build:
    command: 'echo "Build complete"'
    deps:
      - 'frontend:build'

  # Smoke tests (local or remote)
  smoke:
    command: 'bash scripts/smoke_test.sh ${BASE_URL:-http://localhost:3000}'
    local: true
    options:
      runInCI: false
